# 2022.11.20 일

### `const` 와 `Object.freeze()` 로 불변객체 만들기

`Object.freeze()` 는 객체를 불변하게 만들어준다.

기존에 const로 선언한 변수에는 재할당은 불가능하지만 변수의 속성(프로퍼티)을 변경할 순 있다.

 `Object.freeze()` 는 객체를 동결하여 속성을 변경할 수 없게 만든다. 속성을 변경할 수 없게 만들지만 재할당은 가능하다. 

따라서 `const` 와 `Object.freeze()` 로 재할당도 속성 변경도 불가능하게 만들 수 있다.

[https://yorr.tistory.com/21](https://yorr.tistory.com/21)

## 자바스크립트에서의 불변성

그동안 `map()` 이나 `[...arr, 'bar']` 같이 원본 객체를 변경하지 않고 새로운 객체를 반환하는 **Immutable**한 메서드를 자주 사용했다. 그런데 왜 불변성을 지키는 메서드를 사용해야하는지는 깊게 생각해보지 않았다.

아래 예시를 보자.

```jsx
const x = ['foo']
const y = x

console.log(x) // ['foo']
console.log(y) // ['foo']

x.push('bar') // 다른 곳에서 호출된다면?

console.log(x) // ['foo', 'bar']
console.log(y) // ['foo', 'bar']
```

위 예시에서는 코드의 흐름이 간단하여 파악하기 쉬워서 `x, y` 가 변경된 후 값을 예측할 수 있다. 

만약, `x` 를 변경하는 코드가 다른 곳에서 호출된다면 `y` 의 변경을 쉽게 예측할 수 없을거다.

자바스크립트에서 `push` 같이 원본을 변경시키는 메서드가 존재하는 반면에 `...` 스프레드 연산자로 새로운 배열에 값을 할당하는 방법도 존재한다. 

코드가 복잡해질수록 위의 예시처럼 원본을 변경하면 왜 에러가 발생했는지 파악하는 것도, 디버깅하는 것도 어려울 것이다.

앞으로 왜 `map()` , `...` , `reduce` 등 ES6 메서드를 권장하냐고 스스로 묻는다면 불변성을 위함이라고 대답할 수 있겠다.

https://sustainable-dev.tistory.com/156
